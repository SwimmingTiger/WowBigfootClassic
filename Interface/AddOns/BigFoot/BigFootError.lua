 local _ if ( GetLocale() == "zhCN" ) then BFE_HIDE = "屏蔽错误"; BFE_DISABLE = "禁止相关插件"; BFE_HEADER = "脚本错误 (版本 %s)"; BFE_PREFIX_FILE = "文件名："; BFE_PREFIX_LINE = "行　号："; BFE_NOTE = "如果您发现弹出该脚本错误对话框，请使用Ctrl+C键将下方的调用堆栈的内容复制下来，粘贴到NGA大脚论坛。谢谢您支持大脚插件！" BFE_NON_NOTE = "您的插件触发了脚本错误，可能导致错误的插件有：\n\n"; BFE_SYSTEM_ERROR = "您的宏或者标准界面触发了脚本错误，请检查您的宏设置或者WOW的完整性。"; BFE_CLOSE_TITLE = "关闭窗口"; BFE_CLOSE_COMMENT = "关闭当前的脚本错误提示窗口。"; BFE_HIDE_TITLE = "屏蔽错误"; BFE_HIDE_COMMENT = "当一些错误信息重复出现的时候，你可以通过“屏蔽错误”来达到禁止同样的错误重复弹出的目的。"; BFE_DISABLE_TITLE = "禁止相关插件"; BFE_DISABLE_COMMENT = "当该按钮是激活的状态时，说明你可以通过关闭造成错误的插件以防止同类错误重复发生。当该按钮是非激活状态时，说明无法找到相关联的插件。"; BFE_TIP_HEADER = "脚本错误"; BFE_TIP_CLICK = "(点击查看详细内容)" elseif (GetLocale() == "zhTW") then BFE_HIDE = "隱藏錯誤"; BFE_DISABLE = "禁止相關插件"; BFE_HEADER = "腳本錯誤 (版本 %s)"; BFE_PREFIX_FILE = "文件名："; BFE_PREFIX_LINE = "行　號："; BFE_NOTE = "如果您發現彈出該腳本錯誤對話方塊，請使用Ctrl+C鍵將下方的調用堆疊的內容複製下來，粘貼到NGA大腳論壇。謝謝您支持大腳插件！" BFE_NON_NOTE = "您的插件觸發了腳本錯誤，可能導致錯誤的插件有：\n\n"; BFE_SYSTEM_ERROR = "您的巨集或者標準介面觸發了腳本錯誤，請檢查您的宏設置或者WOW的完整性。"; BFE_CLOSE_TITLE = "關閉視窗"; BFE_CLOSE_COMMENT = "關閉目前的腳本錯誤提示視窗。"; BFE_HIDE_TITLE = "隱藏錯誤"; BFE_HIDE_COMMENT = "當一些錯誤訊息重複出現的時候，你可以透過「隱藏錯誤」來達到禁止同樣的錯誤重複彈出的目的。"; BFE_DISABLE_TITLE = "禁止相關插件"; BFE_DISABLE_COMMENT = "當該按鈕是啟動的狀態時，說明你可以透過關閉造成錯誤的插件以防止同類錯誤重複發生。當該按鈕是非啟動狀態時，說明無法找到相關的插件。"; BFE_TIP_HEADER = "腳本錯誤"; BFE_TIP_CLICK = "(點擊查看詳細內容)"; else BFE_HIDE = "Hide Error"; BFE_DISABLE = "Disable Mod"; BFE_HEADER = "Script Error (Version %s)"; BFE_PREFIX_FILE = "Filename: "; BFE_PREFIX_LINE = "Line: "; BFE_NOTE = "If you find this message, please press Ctrl+C to copy the following call stack and paste it on forum. The URL is\n\"http://bigfoot.178.com\", Thanks for your help!" BFE_NON_NOTE = "There is an script error occcurred in your addons:\n\n"; BFE_SYSTEM_ERROR = "There is an scrpt error in your macro or standard interface, please check your macroes and interface."; BFE_CLOSE_TITLE = "Close Window"; BFE_CLOSE_COMMENT = "Close current script error window."; BFE_HIDE_TITLE = "Hide Error"; BFE_HIDE_COMMENT = "You can \"hide error\" to prevent from always showing the same error window."; BFE_DISABLE_TITLE = "Disable Mod"; BFE_DISABLE_COMMENT = "You can close error related mod to prevent from always showing the errors from same mod. It's active once it can be disabled."; BFE_TIP_HEADER = "Script Error"; BFE_TIP_CLICK = "(Click to check info)"; end BigFoot_Error = {}; BigFoot_Error.debug_Mod = BigFoot_Error.debug_Mod or false; local BFError_16e6206302d8896e04f5bd663100b77c = {}; local BFError_63e245f7328a7e8754e1841db6520090 = {}; local BFError_191f3a41d718a666285988b6afeadb70,BFError_583a67a343c6e44cce084cddd4b7bd29,BFError_d313134408254548b176c4dfc4230bb8,BFError_b608e01d06a76b4a4c2a74dd4dce9bd5; local BFError_54456e0759e21b05a338afba884cc512 = 1; local BMath = BLibrary("BMathClass") local function BFError_49d8e76b2a95d9c2fbe526fe69bf4710() BFError_54456e0759e21b05a338afba884cc512 = 1; end local function BFError_03fb031674c2f59798281c1c1fa6ac3f(BFError_97ab390b8ce710da12b2b3aa0de0090b) local addons = {}; local BFError_6e4d0db7491d6883f86de390d20dbe5b, BFError_a2f3972c23a0aa3bd7fb0e9823d918f2, BFError_1652701c940a7445a6e43b954d36ec9b = string.find(BFError_97ab390b8ce710da12b2b3aa0de0090b, "\\AddOns\\(%w+)\\"); while (BFError_6e4d0db7491d6883f86de390d20dbe5b and BFError_a2f3972c23a0aa3bd7fb0e9823d918f2 and BFError_1652701c940a7445a6e43b954d36ec9b) do if (not addons[BFError_1652701c940a7445a6e43b954d36ec9b]) then addons[BFError_1652701c940a7445a6e43b954d36ec9b] = true; end BFError_6e4d0db7491d6883f86de390d20dbe5b, BFError_a2f3972c23a0aa3bd7fb0e9823d918f2, BFError_1652701c940a7445a6e43b954d36ec9b = string.find(BFError_97ab390b8ce710da12b2b3aa0de0090b, "\\AddOns\\(%w+)\\", BFError_a2f3972c23a0aa3bd7fb0e9823d918f2); end for BFError_1652701c940a7445a6e43b954d36ec9b, _ in pairs(addons) do if (BFError_1652701c940a7445a6e43b954d36ec9b ~= "BigFoot" and GetAddOnMetadata(BFError_1652701c940a7445a6e43b954d36ec9b, "X-Revision") == "BigFoot") then return true; end end return false, addons; end local function BFError_0b128a0a54ea3865c4bf96bab3747d76(BFError_baa13c21288f98e62afb9d36f9f9c1f6, BFError_8c87884c91c1797de5f7b99689b0976a, BFError_37ca8bb4456f9eb609d66a9c8d290c55, BFError_d19c45ccfeb67ac4ec8851203c94e263, BFError_97ab390b8ce710da12b2b3aa0de0090b,BFError_43975aa4b29e368c1d658b08e332e857) if not BigFoot_Error.debug_Mod then if GetCVar("scriptErrors") ~= "1" then return end local BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c = BMath:MD5(BFError_baa13c21288f98e62afb9d36f9f9c1f6); BFError_16e6206302d8896e04f5bd663100b77c[BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c] =1; BigFootErrorTipFrame:Hide() BigFootErrorTipFrame.total = BFError_baa13c21288f98e62afb9d36f9f9c1f6; BigFootErrorTipFrame.file = BFError_8c87884c91c1797de5f7b99689b0976a; BigFootErrorTipFrame.line = BFError_37ca8bb4456f9eb609d66a9c8d290c55; BigFootErrorTipFrame.desc = BFError_d19c45ccfeb67ac4ec8851203c94e263; BigFootErrorTipFrame.callstack = BFError_97ab390b8ce710da12b2b3aa0de0090b; BigFootErrorTipFrame.switch = BFError_43975aa4b29e368c1d658b08e332e857; BigFootErrorTipFrame:Show() else BigFootErrorFrame.total = BFError_baa13c21288f98e62afb9d36f9f9c1f6; BigFootErrorFrame.file = BFError_8c87884c91c1797de5f7b99689b0976a; BigFootErrorFrame.line = BFError_37ca8bb4456f9eb609d66a9c8d290c55; BigFootErrorFrame.desc = BFError_d19c45ccfeb67ac4ec8851203c94e263; BigFootErrorFrame.callstack = BFError_97ab390b8ce710da12b2b3aa0de0090b; if BFError_43975aa4b29e368c1d658b08e332e857 then BFE_ScrollFrame:Show(); BFE_CallStackBackground:Show(); else BFE_ScrollFrame:Hide(); BFE_CallStackBackground:Hide(); end BigFootErrorFrame:Show(); end end local function BFError_4f4b60c89386ab479e9886a4873c9b7d(BFError_eed0be1c2d5f65980b06b5094460c3c5) if ( not BFError_eed0be1c2d5f65980b06b5094460c3c5 or type(BFError_eed0be1c2d5f65980b06b5094460c3c5) ~= "string" ) then return; end local BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c = BMath:MD5(BFError_eed0be1c2d5f65980b06b5094460c3c5); if ( BFError_16e6206302d8896e04f5bd663100b77c[BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c] ) then return; end local BFError_baa13c21288f98e62afb9d36f9f9c1f6 = BFError_eed0be1c2d5f65980b06b5094460c3c5; local BFError_6e4d0db7491d6883f86de390d20dbe5b, BFError_a2f3972c23a0aa3bd7fb0e9823d918f2, BFError_8c87884c91c1797de5f7b99689b0976a, BFError_37ca8bb4456f9eb609d66a9c8d290c55, BFError_507d6681fcdef58d30abee282846db75 = string.find(BFError_eed0be1c2d5f65980b06b5094460c3c5, "(.-):%s*(%d+):%s*(.+)"); local BFError_97ab390b8ce710da12b2b3aa0de0090b = debugstack(4); if (not BFError_6e4d0db7491d6883f86de390d20dbe5b or not BFError_a2f3972c23a0aa3bd7fb0e9823d918f2) then BFError_8c87884c91c1797de5f7b99689b0976a = ""; BFError_37ca8bb4456f9eb609d66a9c8d290c55 = ""; BFError_507d6681fcdef58d30abee282846db75 = BFError_eed0be1c2d5f65980b06b5094460c3c5; end local BFError_d19c45ccfeb67ac4ec8851203c94e263 = string.upper(string.sub(BFError_507d6681fcdef58d30abee282846db75, 1, 1)) .. string.sub(BFError_507d6681fcdef58d30abee282846db75, 2); if ( BFError_8c87884c91c1797de5f7b99689b0976a and BFError_8c87884c91c1797de5f7b99689b0976a ~= "" and BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a] ) then return; end BFError_191f3a41d718a666285988b6afeadb70 = debugstack(4); BFError_583a67a343c6e44cce084cddd4b7bd29 = BFError_eed0be1c2d5f65980b06b5094460c3c5; local pt local BFError_12483ade909bf960ee745afe054737a4; if pt then _,BFError_12483ade909bf960ee745afe054737a4 = GetTalentTabInfo(pt); end local BFError_901a5d19153b2c3fc63a6eccd6b5217c, BFError_c5438d0fe080373cae6b21f4a9342162 = BFError_03fb031674c2f59798281c1c1fa6ac3f(BFError_191f3a41d718a666285988b6afeadb70); if (BFError_901a5d19153b2c3fc63a6eccd6b5217c) then if not BigFoot_Error[BIGFOOT_VERSION] then BigFoot_Error[BIGFOOT_VERSION] = {}; end if ( (not BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c]) and BFError_54456e0759e21b05a338afba884cc512 ) then BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c] ={} BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].file = BFError_8c87884c91c1797de5f7b99689b0976a; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].line = BFError_37ca8bb4456f9eb609d66a9c8d290c55; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].desc = BFError_d19c45ccfeb67ac4ec8851203c94e263; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].trace = BFError_97ab390b8ce710da12b2b3aa0de0090b; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].class = UnitClass("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].level = UnitLevel("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].race = UnitRace("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].talent = BFError_12483ade909bf960ee745afe054737a4 BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].zone = GetZoneText(); BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].combat = InCombatLockdown(); BFError_54456e0759e21b05a338afba884cc512 = nil; BigFoot_DelayCall(BFError_49d8e76b2a95d9c2fbe526fe69bf4710, 120); end BFE_Note:SetText(BFE_NOTE); BFError_0b128a0a54ea3865c4bf96bab3747d76(BFError_baa13c21288f98e62afb9d36f9f9c1f6, BFError_8c87884c91c1797de5f7b99689b0976a, BFError_37ca8bb4456f9eb609d66a9c8d290c55, BFError_d19c45ccfeb67ac4ec8851203c94e263, BFError_97ab390b8ce710da12b2b3aa0de0090b,true); else local BFError_eed0be1c2d5f65980b06b5094460c3c5 = BFE_NON_NOTE; local BFError_1d83cdc1e308ccedc1274eff3148e471; for BFError_1652701c940a7445a6e43b954d36ec9b, _ in pairs(BFError_c5438d0fe080373cae6b21f4a9342162) do if (BFError_1652701c940a7445a6e43b954d36ec9b ~= "BigFoot" and BFError_1652701c940a7445a6e43b954d36ec9b~="MiDKP") then BFError_eed0be1c2d5f65980b06b5094460c3c5 = BFError_eed0be1c2d5f65980b06b5094460c3c5 .. " |cffff8000" .. BFError_1652701c940a7445a6e43b954d36ec9b .. "|r\n"; BFError_1d83cdc1e308ccedc1274eff3148e471 = true; end end if (not BFError_1d83cdc1e308ccedc1274eff3148e471) then BFE_Note:SetText(BFE_SYSTEM_ERROR); if BFError_d313134408254548b176c4dfc4230bb8 and (time() == BFError_b608e01d06a76b4a4c2a74dd4dce9bd5) then BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c] = {}; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].file = BFError_8c87884c91c1797de5f7b99689b0976a; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].line = BFError_37ca8bb4456f9eb609d66a9c8d290c55; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].desc = BFError_d19c45ccfeb67ac4ec8851203c94e263; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].trace = BFError_97ab390b8ce710da12b2b3aa0de0090b; BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].class = UnitClass("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].level = UnitLevel("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].race = UnitRace("player") BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].talent = BFError_12483ade909bf960ee745afe054737a4 BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].zone = GetZoneText(); BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].combat = InCombatLockdown(); BigFoot_Error[BIGFOOT_VERSION][BFError_71ac8c04e9eae3efc1f0b8abcf51fc4c].srcError = BFError_d313134408254548b176c4dfc4230bb8; end else BFE_Note:SetText(BFError_eed0be1c2d5f65980b06b5094460c3c5); end BFError_0b128a0a54ea3865c4bf96bab3747d76(BFError_baa13c21288f98e62afb9d36f9f9c1f6, BFError_8c87884c91c1797de5f7b99689b0976a, BFError_37ca8bb4456f9eb609d66a9c8d290c55, BFError_d19c45ccfeb67ac4ec8851203c94e263, BFError_97ab390b8ce710da12b2b3aa0de0090b); end end local function BFError_bcc5f2ac07a80c2cac32e6c594a30622(BFError_eed0be1c2d5f65980b06b5094460c3c5) BFError_4f4b60c89386ab479e9886a4873c9b7d(BFError_eed0be1c2d5f65980b06b5094460c3c5); end function G__BIGFOOT_ERRORMESSAGE(BFError_eed0be1c2d5f65980b06b5094460c3c5) BFError_4f4b60c89386ab479e9886a4873c9b7d(BFError_eed0be1c2d5f65980b06b5094460c3c5) end local function BFError_cd0c81104fda3f120aab6147478c7812() BigFoot_Print("The last message is:"); BigFoot_Print(BFError_583a67a343c6e44cce084cddd4b7bd29); BigFoot_Print("CallStack ==>"); BigFoot_Print(BFError_191f3a41d718a666285988b6afeadb70); end function BigFootErrorFrame_OnLoad(self) self:SetBackdropBorderColor(1.0, 0.0, 0.0); self:SetBackdropColor(0.5, 0.0, 0.0); self:RegisterEvent("ADDON_ACTION_BLOCKED"); self:RegisterEvent("ADDON_ACTION_FORBIDDEN"); SlashCmdList["DEBUGERROR"] = BFError_cd0c81104fda3f120aab6147478c7812; SLASH_DEBUGERROR1 = "/showstack"; BigFootErrorFrameHeader:SetText(string.format(BFE_HEADER, BIGFOOT_VERSION)) seterrorhandler(BFError_bcc5f2ac07a80c2cac32e6c594a30622); end function BigFootErrorFrame_OnEvent(self, BFError_d0708241b607c9a9dd1953c812fadfb7, ...) if (BFError_d0708241b607c9a9dd1953c812fadfb7 == "ADDON_ACTION_FORBIDDEN") then BFError_191f3a41d718a666285988b6afeadb70 = debugstack(); BFError_583a67a343c6e44cce084cddd4b7bd29 = "The addon action is forbidden."; local BFError_6b2a89098f7724fd301e46a7e367fbcf,BFError_ee948c6923a66e7ee20a26f4f4d1fb81 = ...; if BigFoot_Error.debug_Mod then print(BFError_d0708241b607c9a9dd1953c812fadfb7) print(BFError_6b2a89098f7724fd301e46a7e367fbcf) print(BFError_ee948c6923a66e7ee20a26f4f4d1fb81) end local pt local BFError_12483ade909bf960ee745afe054737a4; if pt then _,BFError_12483ade909bf960ee745afe054737a4 = GetTalentTabInfo(pt); end if not BigFoot_Error["ADDON_ACTION_FORBIDDEN"] then BigFoot_Error["ADDON_ACTION_FORBIDDEN"] = {} end BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf] = {}; BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].version = BIGFOOT_VERSION; BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].class = UnitClass("player"); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].level = UnitLevel("player"); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].race = UnitRace("player"); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].talent = BFError_12483ade909bf960ee745afe054737a4; BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].time = time(); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].zone = GetZoneText(); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].combat = InCombatLockdown(); BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].forbiddenfunc = BFError_ee948c6923a66e7ee20a26f4f4d1fb81; BigFoot_Error["ADDON_ACTION_FORBIDDEN"][BFError_6b2a89098f7724fd301e46a7e367fbcf].trace = BFError_191f3a41d718a666285988b6afeadb70; elseif (BFError_d0708241b607c9a9dd1953c812fadfb7 == "ADDON_ACTION_BLOCKED") then local func; BFError_d313134408254548b176c4dfc4230bb8,func = ...; BFError_b608e01d06a76b4a4c2a74dd4dce9bd5 = time(); if BigFoot_Error.debug_Mod then print(BFError_d0708241b607c9a9dd1953c812fadfb7) print(BFError_d313134408254548b176c4dfc4230bb8) print(func) end end end function BigFootError_OnDisableButtonClicked(self) local BFError_8c87884c91c1797de5f7b99689b0976a = self:GetParent().file; if ( BFError_8c87884c91c1797de5f7b99689b0976a and type(BFError_8c87884c91c1797de5f7b99689b0976a)=="string" ) then if ( BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a] and BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a].callback ) then BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a].callback(); end end end function BigFootError_CheckButtons(self) local BFError_8c87884c91c1797de5f7b99689b0976a = self.file; if ( BFError_8c87884c91c1797de5f7b99689b0976a and type(BFError_8c87884c91c1797de5f7b99689b0976a)=="string" ) then if ( BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a] and BFError_63e245f7328a7e8754e1841db6520090[BFError_8c87884c91c1797de5f7b99689b0976a].callback ) then BigFootErrorFrameDisableButton:Enable(); return; end end BigFootErrorFrameDisableButton:Disable(); end function BigFootErrorFrame_OnHide(self) self.total = nil; self.file = nil; self.line = nil; self.desc = nil; end function BigFootErrorFrame_ButtonOnEnter(self,title,comment) GameTooltip_SetDefaultAnchor(GameTooltip, self); GameTooltip:ClearLines(); GameTooltip_AddNewbieTip(self, title, 1.0, 1.0, 1.0, comment, 1); end function BigFootErrorFrame_ButtonOnLeave(self) GameTooltip:Hide(); end function BigFootErrorTipFrameOnShow(self) self.linenum:SetText(self.line) self.filename:SetText("..." .. string.sub(self.file,-10,-1)) end function BigFootErrorTipFrameOnClick(self) BigFootErrorFrame.total = BigFootErrorTipFrame.total; BigFootErrorFrame.file = BigFootErrorTipFrame.file; BigFootErrorFrame.line = BigFootErrorTipFrame.line; BigFootErrorFrame.desc = BigFootErrorTipFrame.desc; BigFootErrorFrame.callstack = BigFootErrorTipFrame.callstack; BigFootErrorFrame:Show() if BigFootErrorTipFrame.switch then BFE_ScrollFrame:Show(); BFE_CallStackBackground:Show(); else BFE_ScrollFrame:Hide(); BFE_CallStackBackground:Hide(); end BigFootErrorFrame:Show(); BigFootErrorTipFrame:Hide() end function BFETip_OnMouseDown(self,button) self:StartMoving() end function BFETip_OnMouseUp(self,button) self:StopMovingOrSizing() end function BigFootErrorTipFrameOnLoad(self) local tipAG = self:CreateAnimationGroup("BFETipOnShow") tipAG:SetLooping("NONE") local tipShow = tipAG:CreateAnimation("Alpha") local tipHide = tipAG:CreateAnimation("Alpha") tipShow:SetDuration(2) tipShow:SetFromAlpha(0) tipShow:SetToAlpha(1) tipShow:SetOrder(1) tipAG:SetScript("OnPlay",function() self:SetAlpha(0) self:Show() end) tipAG:SetScript("OnFinished",function (frame,requested) self:SetAlpha(0) end) tipHide:SetDuration(2) tipHide:SetFromAlpha(1) tipHide:SetToAlpha(0) tipHide:SetOrder(1) tipHide:SetStartDelay(5) end --[[ Not used,应该是做禁用检查的 出现错误的时候检测该插件的__callback方法 function BigFoot_RegisterErrorResponse(BFError_a019f6453754082f25da769f4d991898, BFError_6aec56fd400c2ff60374decd93586868) if ( BFError_a019f6453754082f25da769f4d991898 and type(BFError_a019f6453754082f25da769f4d991898)=="string" ) then BFError_63e245f7328a7e8754e1841db6520090[BFError_a019f6453754082f25da769f4d991898] = {}; BFError_63e245f7328a7e8754e1841db6520090[BFError_a019f6453754082f25da769f4d991898].callback = BFError_6aec56fd400c2ff60374decd93586868; end end ]] 
